<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>My Bill</title>
    
	#parse("css.vm")
	<style >
		.progress {
            position: relative;
        }
        
        .bar {
            z-index: 1;
            position: absolute;
        }
        
        .progress span {
            position: relative;
            top: 0;
            z-index: 2;
            color: black; // You might need to change it
            text-align: center;
            width: 100%;
        }
    </style>
	#parse("Javascript.vm")
	<script src="resources/highcharts/highcharts.js"></script>
    <script src="resources/highcharts/modules/exporting.js"></script>
	<script src="resources/highcharts/highcharts-more.js"></script>
	<script type="text/javascript">
    function generateGaugeChart() {
    	
        $('#minsGaugeContainer').highcharts({
    	
    	    chart: {
    	        type: 'gauge',
    	        plotBackgroundColor: null,
    	        plotBackgroundImage: null,
    	        plotBorderWidth: 0,
    	        plotShadow: false
    	    },
    	    
    	    title: {
    	        text: 'Minutes'
    	    },
    	    
    	    pane: {
    	        startAngle: -150,
    	        endAngle: 150,
    	        background: [{
    	            backgroundColor: {
    	                linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
    	                stops: [
    	                    [0, '#FFF'],
    	                    [1, '#333']
    	                ]
    	            },
    	            borderWidth: 0,
    	            outerRadius: '109%'
    	        }, {
    	            backgroundColor: {
    	                linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
    	                stops: [
    	                    [0, '#333'],
    	                    [1, '#FFF']
    	                ]
    	            },
    	            borderWidth: 1,
    	            outerRadius: '107%'
    	        }, {
    	            // default background
    	        }, {
    	            backgroundColor: '#DDD',
    	            borderWidth: 0,
    	            outerRadius: '105%',
    	            innerRadius: '103%'
    	        }]
    	    },
    	       
    	    // the value axis
    	    yAxis: {
    	        min: 0,
    	        max: 2000,
    	        
    	        minorTickInterval: 'auto',
    	        minorTickWidth: 1,
    	        minorTickLength: 10,
    	        minorTickPosition: 'inside',
    	        minorTickColor: '#666',
    	
    	        tickPixelInterval: 30,
    	        tickWidth: 2,
    	        tickPosition: 'inside',
    	        tickLength: 10,
    	        tickColor: '#666',
    	        labels: {
    				step: 2,
    	            rotation: 'auto'
    	        },
    	        plotBands: [{
    	            from: 0,
    	            to: 1000,
    	            color: '#55BF3B' // green
    	        }, {
    	            from: 1000,
    	            to: 1500,
    	            color: '#DDDF0D' // yellow
    	        }, {
    	            from: 1500,
    	            to: 2000,
    	            color: '#DF5353' // red
    	        }]        
    	    },
    	
    	    series: [{
    	        name: 'Minutes',
    	        data: [970],
    	        tooltip: {
    	            valueSuffix: ' mins'
    	        }
    	    }]
    	
    	});
    }
    </script>
</head>
  <body>
    <div class="wrapper">
		<header class="header">
			#parse("menu.vm")
		</header>
		<div class="container-fluid" style="min-height:85.5%">
		    <div class="row-fluid" id="formConatiner">
			    <div class="span12">
				    <div class="well">
						<h4>My bill details</h4>
						<div class="accordion" id="accordion2">
                            #if($myBillVO.lastBillFlag)
                                <div class="accordion-group">
                                    <div class="accordion-heading">
                                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
                                        Last bill
                                        </a>
                                    </div>
                                    <div id="collapseOne" class="accordion-body collapse in">
                    					<div class="accordion-inner">
                                            $myBillVO.lastBill&nbsp;$myBillVO.currency
                                            <dl class="dl-horizontal">
                                              <dt>Last billed on</dt>
                                              <dd>$myBillVO.lastBillDate</dd>
                							  <dt>Payment due on</dt>
                                              <dd>$myBillVO.lastBillDueDate</dd>
                                            </dl> 
                                        </div>
                                    </div>
                                </div>
                            #end
                          
                            #if($myBillVO.lastPaymentFlag)
                                <div class="accordion-group">
                                    <div class="accordion-heading">
                                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseThree">
                                        Last payment
                                        </a>
                                    </div>
                                    <div id="collapseThree" class="accordion-body collapse">
                                        <div class="accordion-inner">
                                            $myBillVO.lastPayment &nbsp; $myBillVO.currency 
                                            <dl class="dl-horizontal">
                								<dt>Payment received on</dt>
                								<dd>$myBillVO.lastPaymentDate</dd>
                							</dl>
                                        </div>
                                    </div>
                                </div>
                			#end
                			#if($myBillVO.dataUsageFlag)
                                <div class="accordion-group">
                                    <div class="accordion-heading">
                                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseFour" onclick="generateGaugeChart()">
                                        Data usage
                                        </a>
                                    </div>
                                    <div id="collapseFour" class="accordion-body collapse">
                                        <div class="accordion-inner">
                                            <dl class="dl-horizontal">
                								<dt>Unbilled Amount</dt>
                								<dd>$myBillVO.recentCharges&nbsp;$myBillVO.currency</dd>
                								<dt>Your next bill date is</dt>
                    							<dd>$myBillVO.nextBillDate</dd>
                								<dt>Minutes Used</dt>
                								<dd>
                									<div id="minsGaugeContainer" style="width: 300px; height: 200px; margin: 0 auto"></div>
                								</dd>
                								<br/>
                								<dt>Data Used</dt>
                								<dd>
                									<div class="$myBillVO.dataProgressBarStyle">
                										<div class="bar" style="width: $myBillVO.dataPercentage%;"></div>
                                                        <center><span>$myBillVO.dataUsed MB / $myBillVO.totalData MB</span></center>
                									</div>
                								</dd>
                							</dl>
                                        </div>
                                    </div>
                                </div>
                            #end
                        
                        </div>
				    </div>
			    </div>
		     </div>
		</div>
		<footer class="footer">
			#parse("footer.vm")
		</footer>
    </div>
  </body>
</html>